package com.project.controller;

import java.util.ArrayList;
import java.util.List;
import java.util.Map;

import org.apache.tomcat.util.net.openssl.ciphers.Authentication;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.core.io.Resource;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PatchMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.multipart.MultipartFile;

import com.fasterxml.jackson.core.type.TypeReference;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.project.model.Ingredient;
import com.project.model.Inquiry;
import com.project.model.Recipe;
import com.project.model.User;
import com.project.model.UserDeletionRequest;
import com.project.model.UserRecipe;
import com.project.model.krhBoardVO;
import com.project.model.krhReportVo;
import com.project.service.AdminService;
import com.project.service.FileStorageService;

import lombok.RequiredArgsConstructor;
@RestController
@RequestMapping("/admin")
@RequiredArgsConstructor
public class AdminController {

    private final AdminService adminService;
    @Autowired
    private FileStorageService fileStorageService; // âœ… fileStorageService ì£¼ì…
    @Autowired
    private JdbcTemplate jdbcTemplate;
    // ğŸ”¹ ì „ì²´ íšŒì› ì¡°íšŒ
    @GetMapping("/users")
    public ResponseEntity<List<User>> getAllUsers() {
        return ResponseEntity.ok(adminService.getAllUsers());
    }

    // ğŸ”¹ íšŒì› ì‚­ì œ
    @DeleteMapping("/users/{email}")
    public ResponseEntity<String> deleteUser(@PathVariable String email) {
        adminService.deleteUser(email);
        return ResponseEntity.ok("User deleted.");
    }

    // ğŸ”¹ íšŒì›íƒˆí‡´ ìš”ì²­ ëª©ë¡ ì¡°íšŒ
    @GetMapping("/deletion-requests")
    public ResponseEntity<List<UserDeletionRequest>> getAllDeletionRequests() {
        return ResponseEntity.ok(adminService.getAllDeletionRequests());
    }

    // ğŸ”¹ íšŒì›íƒˆí‡´ ìš”ì²­ ìŠ¹ì¸
    // âœ… íšŒì› íƒˆí‡´ ìš”ì²­ ìŠ¹ì¸ (DELETE ìš”ì²­)
    @DeleteMapping("/deletion-requests/{email}")
    public ResponseEntity<String> approveDeletionRequest(@PathVariable String email) {
        adminService.approveDeletionRequest(email);
        return ResponseEntity.ok("íšŒì› íƒˆí‡´ ìš”ì²­ì´ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    // âœ… 1. 1:1 ë¬¸ì˜ ì „ì²´ ì¡°íšŒ
    @GetMapping("/inquiries")
    public ResponseEntity<List<Inquiry>> getAllInquiries() {
        return ResponseEntity.ok(adminService.getAllInquiries());
    }
    // âœ… 1:1 ë¬¸ì˜ ìƒì„¸ë³´ê¸° ì—”ë“œí¬ì¸íŠ¸
    @GetMapping("/inquiries/{id}")
    public ResponseEntity<Inquiry> getInquiryDetail(@PathVariable Long id) {
        Inquiry inquiry = adminService.getInquiryDetail(id);
        if (inquiry == null) {
            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(null);
        }
        return ResponseEntity.ok(inquiry);
    }
    // âœ… 2. 1:1 ë¬¸ì˜ ë‹µë³€ ë“±ë¡ (RequestParam â†’ RequestBodyë¡œ ë³€ê²½)
    @PatchMapping("/inquiries/reply/{id}")
    public ResponseEntity<String> updateInquiryReply(@PathVariable Long id, @RequestBody Map<String, String> payload) {
        String reply = payload.get("reply");
        if (reply == null || reply.isEmpty()) {
            return ResponseEntity.badRequest().body("ë‹µë³€ ë‚´ìš©ì„ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.");
        }
        adminService.updateInquiryReply(id, reply);
        return ResponseEntity.ok("ë‹µë³€ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

 // âœ… 1:1 ë¬¸ì˜ ì‚­ì œ (ë¬¸ì˜ ìì²´ ì‚­ì œ)
    @DeleteMapping("/inquiries/{id}")
    public ResponseEntity<String> deleteInquiry(@PathVariable Long id) {
        adminService.deleteInquiry(id);
        return ResponseEntity.ok("ë¬¸ì˜ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    // âœ… 1:1 ë¬¸ì˜ ë‹µë³€ ì‚­ì œ (ë¬¸ì˜ëŠ” ë‚¨ê²¨ë‘ê³  ë‹µë³€ë§Œ ì‚­ì œ)
    @DeleteMapping("/inquiries/reply/{id}")
    public ResponseEntity<String> deleteInquiryReply(@PathVariable Long id) {
        adminService.deleteInquiryReply(id);
        return ResponseEntity.ok("ë‹µë³€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    @PostMapping("/notifications")
    public ResponseEntity<String> sendNotification(@RequestBody Map<String, String> payload) {
        String receiverEmail = payload.get("receiverEmail");
        String message = payload.get("message");

        if (receiverEmail == null || receiverEmail.isEmpty()) {
            return ResponseEntity.badRequest().body("receiverEmail ê°’ì´ í•„ìš”í•©ë‹ˆë‹¤.");
        }

        // âœ… [ê´€ë¦¬ì] íƒœê·¸ê°€ ì—†ë‹¤ë©´ ìë™ìœ¼ë¡œ ë¶™ì—¬ì£¼ê¸°
        if (message != null && !message.startsWith("[ê´€ë¦¬ì]")) {
            message = "[ê´€ë¦¬ì] " + message;
        }

        adminService.sendUserNotification(receiverEmail, message);
        return ResponseEntity.ok("ì•Œë¦¼ì´ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }
    

    /** âœ… ì¼ë°˜ ë ˆì‹œí”¼ (Recipes) ê´€ë¦¬ **/
    /** âœ… 1. ëª¨ë“  ë ˆì‹œí”¼ ê°€ì ¸ì˜¤ê¸° */
    @GetMapping("/recipes")
    public ResponseEntity<List<Recipe>> getRecipes(
        @RequestParam(required = false) String keyword,
        @RequestParam(required = false) Integer categoryId,
        @RequestParam(required = false) Integer weatherId
    ) {
        List<Recipe> recipes = adminService.getRecipes(keyword, categoryId, weatherId);
        return ResponseEntity.ok(recipes);
    }
    
    /** âœ… 2. íŠ¹ì • ë ˆì‹œí”¼ ì¡°íšŒ (ë ˆì‹œí”¼ + ì¬ë£Œ ëª©ë¡ í¬í•¨) */
    @GetMapping("/recipes/{recipeId}")
    public ResponseEntity<Recipe> getRecipeById(@PathVariable Long recipeId) {
        return ResponseEntity.ok(adminService.getRecipeById(recipeId));
    }

    /** âœ… 3. íŠ¹ì • ë ˆì‹œí”¼ì˜ ì¬ë£Œ ëª©ë¡ ì¡°íšŒ */
    @GetMapping("/recipes/{recipeId}/ingredients")
    public ResponseEntity<List<Ingredient>> getIngredientsByRecipeId(@PathVariable Long recipeId) {
        return ResponseEntity.ok(adminService.getIngredientsByRecipeId(recipeId));
    }

    /** âœ… 4. ë ˆì‹œí”¼ ì¶”ê°€ */
    @PostMapping("/recipes")
    public ResponseEntity<String> addRecipe(
            @RequestParam("foodName") String foodName,
            @RequestParam("foodTime") int foodTime,
            @RequestParam("categoryId") int categoryId,
            @RequestParam(value = "weatherId", required = false) String weatherIdStr,
            @RequestParam(value = "foodImg", required = false) MultipartFile foodImg,
            @RequestParam(value = "ingredients", required = false) String ingredientsJson, // âœ… ë¬¸ìì—´ë¡œ ë°›ìŒ
            @RequestParam(value = "step1", required = false) String step1,
            @RequestParam(value = "step2", required = false) String step2,
            @RequestParam(value = "step3", required = false) String step3,
            @RequestParam(value = "step4", required = false) String step4,
            @RequestParam(value = "step5", required = false) String step5,
            @RequestParam(value = "step6", required = false) String step6,
            @RequestParam(value = "stepImg1", required = false) MultipartFile stepImg1,
            @RequestParam(value = "stepImg2", required = false) MultipartFile stepImg2,
            @RequestParam(value = "stepImg3", required = false) MultipartFile stepImg3,
            @RequestParam(value = "stepImg4", required = false) MultipartFile stepImg4,
            @RequestParam(value = "stepImg5", required = false) MultipartFile stepImg5,
            @RequestParam(value = "stepImg6", required = false) MultipartFile stepImg6
    ) {
        try {
            // âœ… JSONìœ¼ë¡œ ì „ë‹¬ëœ ì¬ë£Œ ëª©ë¡ì„ ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜
            ObjectMapper objectMapper = new ObjectMapper();
            List<String> ingredients = ingredientsJson != null ? objectMapper.readValue(ingredientsJson, new TypeReference<List<String>>() {}) : new ArrayList<>();

            // â— "null" ë¬¸ìì—´ì„ ì‹¤ì œ nullë¡œ ë³€í™˜
            Integer weatherId = (weatherIdStr == null || weatherIdStr.equals("null") || weatherIdStr.isEmpty()) ? null : Integer.parseInt(weatherIdStr);

            Recipe recipe = new Recipe(foodName, foodTime, categoryId, weatherId);
            adminService.addRecipe(recipe, foodImg, step1, step2, step3, step4, step5, step6,
                    stepImg1, stepImg2, stepImg3, stepImg4, stepImg5, stepImg6, categoryId, foodTime, weatherId, ingredients);

            return ResponseEntity.ok("âœ… ë ˆì‹œí”¼ ì¶”ê°€ ì™„ë£Œ!");
        } catch (Exception e) {
            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body("âŒ ë ˆì‹œí”¼ ì¶”ê°€ ì‹¤íŒ¨: " + e.getMessage());
        }
    }


    /** âœ… 5. ë ˆì‹œí”¼ ìˆ˜ì • */
    @PutMapping("/recipes/{recipeId}")
    public ResponseEntity<String> updateRecipe(
            @PathVariable Long recipeId,
            @RequestParam("foodName") String foodName,
            @RequestParam("foodTime") int foodTime,
            @RequestParam("categoryId") int categoryId,
            @RequestParam(value = "weatherId", required = false) Integer weatherId,
            @RequestParam(value = "foodImg", required = false) MultipartFile foodImg,
            @RequestParam(value = "deleteFoodImg", required = false) boolean deleteFoodImg, // âœ… ì´ë¯¸ì§€ ì‚­ì œ ì—¬ë¶€ ì¶”ê°€
            @RequestParam(value = "step1", required = false) String step1,
            @RequestParam(value = "step2", required = false) String step2,
            @RequestParam(value = "step3", required = false) String step3,
            @RequestParam(value = "step4", required = false) String step4,
            @RequestParam(value = "step5", required = false) String step5,
            @RequestParam(value = "step6", required = false) String step6,
            @RequestParam(value = "stepImg1", required = false) MultipartFile stepImg1,
            @RequestParam(value = "deleteStepImg1", required = false) boolean deleteStepImg1, // âœ… ì´ë¯¸ì§€ ì‚­ì œ ì—¬ë¶€ ì¶”ê°€
            @RequestParam(value = "stepImg2", required = false) MultipartFile stepImg2,
            @RequestParam(value = "deleteStepImg2", required = false) boolean deleteStepImg2, 
            @RequestParam(value = "stepImg3", required = false) MultipartFile stepImg3,
            @RequestParam(value = "deleteStepImg3", required = false) boolean deleteStepImg3, 
            @RequestParam(value = "stepImg4", required = false) MultipartFile stepImg4,
            @RequestParam(value = "deleteStepImg4", required = false) boolean deleteStepImg4, 
            @RequestParam(value = "stepImg5", required = false) MultipartFile stepImg5,
            @RequestParam(value = "deleteStepImg5", required = false) boolean deleteStepImg5, 
            @RequestParam(value = "stepImg6", required = false) MultipartFile stepImg6,
            @RequestParam(value = "deleteStepImg6", required = false) boolean deleteStepImg6, 
            @RequestParam(value = "ingredients", required = false) List<String> ingredients) {

        // ê¸°ì¡´ ë ˆì‹œí”¼ ì¡°íšŒ (DBì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸)
        Recipe existingRecipe = adminService.getRecipeById(recipeId);
        if (existingRecipe == null) {
            return ResponseEntity.status(HttpStatus.NOT_FOUND).body("ë ˆì‹œí”¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }

        // âœ… ì‚­ì œ ìš”ì²­ì´ ìˆìœ¼ë©´ ê¸°ì¡´ ì´ë¯¸ì§€ ì‚­ì œ
        if (deleteFoodImg) {
            adminService.deleteFile(existingRecipe.getFoodImg());
            existingRecipe.setFoodImg(null);
        }
        if (deleteStepImg1) adminService.deleteFile(existingRecipe.getStepImg1());
        if (deleteStepImg2) adminService.deleteFile(existingRecipe.getStepImg2());
        if (deleteStepImg3) adminService.deleteFile(existingRecipe.getStepImg3());
        if (deleteStepImg4) adminService.deleteFile(existingRecipe.getStepImg4());
        if (deleteStepImg5) adminService.deleteFile(existingRecipe.getStepImg5());
        if (deleteStepImg6) adminService.deleteFile(existingRecipe.getStepImg6());

        // âœ… ë ˆì‹œí”¼ ê¸°ë³¸ ì •ë³´ ì—…ë°ì´íŠ¸
        existingRecipe.setFoodName(foodName);
        existingRecipe.setFoodTime(foodTime);
        existingRecipe.setCategoryId(categoryId);
        existingRecipe.setWeatherId(weatherId);

        // âœ… ì„œë¹„ìŠ¤ì—ì„œ ì‹¤ì œ ì—…ë°ì´íŠ¸ ì§„í–‰
        adminService.updateRecipe(
        	    existingRecipe, foodImg,
        	    step1, step2, step3, step4, step5, step6,
        	    stepImg1, stepImg2, stepImg3, stepImg4, stepImg5, stepImg6,
        	    deleteFoodImg, deleteStepImg1, deleteStepImg2, deleteStepImg3, deleteStepImg4, deleteStepImg5, deleteStepImg6,
        	    ingredients
        	);

        return ResponseEntity.ok("ë ˆì‹œí”¼ ìˆ˜ì • ì™„ë£Œ!");
    }

    /** âœ… 6. ë ˆì‹œí”¼ ì‚­ì œ */
    @DeleteMapping("/recipes/{recipeId}")
    public ResponseEntity<String> deleteRecipe(@PathVariable Long recipeId) {
        adminService.deleteRecipe(recipeId);
        return ResponseEntity.ok("ë ˆì‹œí”¼ ì‚­ì œ ì™„ë£Œ!");
    }

  
    @DeleteMapping("/recipes/{recipeId}/step-img/{stepNumber}")
    public ResponseEntity<?> deleteStepImage(@PathVariable Long recipeId, @PathVariable int stepNumber) {
        try {
            adminService.deleteStepImage(recipeId, stepNumber);
            return ResponseEntity.ok().body("âœ… ë‹¨ê³„ " + stepNumber + " ì´ë¯¸ì§€ ì‚­ì œ ì„±ê³µ");
        } catch (Exception e) {
            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body("âŒ ì´ë¯¸ì§€ ì‚­ì œ ì‹¤íŒ¨: " + e.getMessage());
        }
    }
    // âœ… ì „ì²´ ìœ ì € ë ˆì‹œí”¼ ì¡°íšŒ
    @GetMapping("/user-recipes")
    public ResponseEntity<List<UserRecipe>> getAllUserRecipes() {
        System.out.println("ğŸ“¥ ì „ì²´ ìœ ì € ë ˆì‹œí”¼ ì¡°íšŒ ìš”ì²­ ìˆ˜ì‹ ë¨");
        return ResponseEntity.ok(adminService.getAllUserRecipes());
    }
 // ìŠ¹ì¸ëœ ìœ ì € ë ˆì‹œí”¼ ì¡°íšŒ
    @GetMapping("/user-recipes/approved")
    public List<UserRecipe> getApprovedUserRecipes() {
        return adminService.getUserRecipesByStatus("on");
    }
    // âœ… íŠ¹ì • ìœ ì € ë ˆì‹œí”¼ ì¡°íšŒ
    @GetMapping("/user-recipes/{id}")
    public ResponseEntity<UserRecipe> getUserRecipeById(@PathVariable Long id) {
        System.out.println("ğŸ“¥ íŠ¹ì • ìœ ì € ë ˆì‹œí”¼ ì¡°íšŒ ìš”ì²­ - ID: " + id);
        return ResponseEntity.ok(adminService.getUserRecipeById(id));
    }

    // âœ… ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì¸ ìœ ì € ë ˆì‹œí”¼ ì¡°íšŒ
    @GetMapping("/user-recipes/pending")
    public ResponseEntity<List<UserRecipe>> getPendingUserRecipes() {
        System.out.println("ğŸ“¥ ìŠ¹ì¸ ëŒ€ê¸° ìœ ì € ë ˆì‹œí”¼ ì¡°íšŒ ìš”ì²­");
        return ResponseEntity.ok(adminService.getPendingUserRecipes());
    }

    // âœ… ìœ ì € ë ˆì‹œí”¼ ìŠ¹ì¸
    @PatchMapping("/user-recipes/{id}/approve")
    public ResponseEntity<String> approveUserRecipe(@PathVariable Integer id) {
        System.out.println("ğŸ› ï¸ ìœ ì € ë ˆì‹œí”¼ ìŠ¹ì¸ ìš”ì²­ ìˆ˜ì‹  - ID: " + id);
        try {
            adminService.approveUserRecipe(id);
            return ResponseEntity.ok("ìœ ì € ë ˆì‹œí”¼ê°€ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.");
        } catch (Exception e) {
            return ResponseEntity.internalServerError().body("ë ˆì‹œí”¼ ìŠ¹ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: " + e.getMessage());
        }
    }

    // âœ… ìœ ì € ë ˆì‹œí”¼ ì‚­ì œ
    @DeleteMapping("/user-recipes/{id}")
    public ResponseEntity<String> deleteUserRecipe(@PathVariable Integer id) {
        System.out.println("ğŸ—‘ï¸ ìœ ì € ë ˆì‹œí”¼ ì‚­ì œ ìš”ì²­ - ID: " + id);
        adminService.deleteUserRecipe(id);
        return ResponseEntity.ok("ìœ ì € ë ˆì‹œí”¼ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
    }



 // ğŸ“Œ ì‹ ê³  ì „ì²´ ëª©ë¡
 @GetMapping("/reports")
 public List<krhReportVo> getAllReports() {
     return adminService.getReports();
 }

 // ğŸ“Œ ì‹ ê³  ìƒì„¸ ì¡°íšŒ
 @GetMapping("/reports/{reportId}")
 public krhReportVo getReportDetail(@PathVariable int reportId) {
     return adminService.getReportById(reportId);
 }

 // ğŸ“Œ ì‹ ê³  ì‚­ì œ
 @DeleteMapping("/reports/{reportId}")
 public String deleteReport(@PathVariable int reportId) {
     adminService.deleteReport(reportId);
     return "ì‹ ê³ ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.";
 }
//ì „ì²´ ê²Œì‹œë¬¼ ëª©ë¡ ì¡°íšŒ
@GetMapping("/boards")
public List<krhBoardVO> getAllBoards() {
  return adminService.getAllBoards();
}
 //íŠ¹ì • ê²Œì‹œë¬¼ ì¡°íšŒ
 @GetMapping("/boards/{boardId}")
 public krhBoardVO getBoardDetail(@PathVariable int boardId) {
     return adminService.getBoardById(boardId);
 }
 //íŠ¹ì • ê²Œì‹œë¬¼ ì‚­ì œ 
 @DeleteMapping("/boards/{boardId}")
 public String deleteBoard(@PathVariable int boardId) {
     adminService.deleteBoard(boardId);
     return "ê²Œì‹œê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.";
 }

 // ğŸ“Œ 1. ì¼ë³„ íšŒì›ê°€ì… ìˆ˜ í†µê³„
    @GetMapping("/daily-signups")
    public List<Map<String, Object>> getDailySignups() {
        String sql = "SELECT DATE(created_at) AS date, COUNT(*) AS count FROM users GROUP BY DATE(created_at) ORDER BY DATE(created_at)";
        return jdbcTemplate.queryForList(sql);
    }

 // ğŸ“Œ 2. ì¡°íšŒìˆ˜ê°€ ë§ì€ ë ˆì‹œí”¼
    @GetMapping("/top-viewed-recipes")
    public List<Map<String, Object>> getTopViewedRecipes() {
        String sql = "SELECT foodname, view FROM recipes ORDER BY view DESC LIMIT 5"; // âœ… 'likes' â†’ 'view'ë¡œ ë³€ê²½
        return jdbcTemplate.queryForList(sql);
    }


  

 

    // âœ… ìµœê·¼ 30ì¼ ë™ì•ˆ ê°€ì¥ ë§ì´ ë¡œê·¸ì¸í•œ ìœ ì € ì¡°íšŒ
    @GetMapping("/most-active-users")
    public List<Map<String, Object>> getMostActiveUsers() {
        return adminService.getMostActiveUsers();
    }

    // ğŸ“Œ 5. í˜„ì¬ ì ‘ì†ì ìˆ˜
    @GetMapping("/current-users")
    public Map<String, Object> getCurrentActiveUsers() {
        String sql = "SELECT COUNT(*) AS active_users FROM users WHERE last_login >= NOW() - INTERVAL 10 MINUTE";
        return jdbcTemplate.queryForMap(sql);
    }
    @GetMapping("/recipe-category-count")
    public List<Map<String, Object>> getRecipeCategoryCount() {
        String sql = """
            SELECT c.category_name, COUNT(r.recipes_id) AS count
            FROM Categories c
            LEFT JOIN recipes r ON c.category_id = r.category_id
            GROUP BY c.category_name
            ORDER BY count DESC;
        """;
        return jdbcTemplate.queryForList(sql);
    }

    /** âœ… 5. íŒŒì¼ ì œê³µ */
    @GetMapping("/{fileName:.+}")
    public ResponseEntity<Resource> serveFile(@PathVariable String fileName) {
        Resource file = fileStorageService.loadFileAsResource(fileName);
        return ResponseEntity.ok()
                .header(HttpHeaders.CONTENT_DISPOSITION, "inline; filename=\"" + file.getFilename() + "\"")
                .body(file);
    }
}