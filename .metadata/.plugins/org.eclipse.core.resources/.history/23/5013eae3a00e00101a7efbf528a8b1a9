package com.project.service;

import java.time.LocalDateTime;
import java.util.List;

import org.springframework.stereotype.Service;

import com.project.mapper.NotificationMapper;
import com.project.model.Notification;

import lombok.RequiredArgsConstructor;

@Service
@RequiredArgsConstructor
public class NotificationService {

    private final NotificationMapper notificationMapper;

    // ğŸ”¹ ì•Œë¦¼ ì „ì†¡
    public void sendNotification(String email, String message) {
        Notification notification = new Notification();
        notification.setReceiverEmail(email);
        notification.setMessage(message);
        notification.setIsRead(false);
        notification.setCreatedAt(LocalDateTime.now());

        notificationMapper.sendNotification(notification);
    }

    // ğŸ”¹ ì•ˆ ì½ì€ ê´€ë¦¬ì ì•Œë¦¼ë§Œ ê°€ì ¸ì˜¤ê¸° (ì´ë©”ì¼ ê¸°ë°˜)
    public List<Notification> getUnreadAdminNotifications(String email) {
        return notificationMapper.selectUnreadAdminNotifications(email);
    }

    // ğŸ”¹ ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬
    public void markNotificationAsRead(Long notificationId) {
        notificationMapper.markNotificationAsRead(notificationId);
    }

    // ğŸ”¹ ì•Œë¦¼ ì‚­ì œ
    public void deleteNotification(Long notificationId) {
        notificationMapper.deleteNotification(notificationId);
    }
    
} 